<!DOCTYPE html><html lang="zh"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>角色知识库配置</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
            background-color: #f9f9f9;
        }

        h1 {
            text-align: center;
            color: #333;
        }

        .role-container {
            margin-bottom: 10px;
            background: #fff;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        .role-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .role-name {
            font-size: 16px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .knowledge-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }

        .knowledge-item {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f1f1f1;
            padding: 8px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .knowledge-item span {
            font-size: 14px;
        }

        .knowledge-item input[type="checkbox"] {
            margin-right: 5px;
        }

        .knowledge-item button {
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 12px;
        }

        .knowledge-item button:hover {
            background-color: #c0392b;
        }

        .knowledge-input-group {
            display: flex;
            align-items: center;
            gap: 5px;
            background-color: #f9f9f9;
            padding: 6px 8px;
            border-radius: 6px;
            border: 1px solid #ddd;
        }

        .knowledge-input-group select,
        .knowledge-input-group input {
            padding: 6px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .knowledge-input-group input {
            flex: 1;
        }

        .role-row button {
            padding: 6px 12px;
            font-size: 14px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .add-knowledge-btn {
            background-color: #3498db;
            color: white;
        }

        .add-knowledge-btn:hover {
            background-color: #2980b9;
        }

        .delete-role-btn {
            background-color: #e74c3c;
            color: white;
        }

        .delete-role-btn:hover {
            background-color: #c0392b;
        }

        .toggle-role-btn {
            background-color: #f39c12;
            color: white;
        }

        .toggle-role-btn:hover {
            background-color: #d35400;
        }

        .add-role-container {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }

        .add-role-container input {
            padding: 6px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .add-role-container button {
            padding: 6px 12px;
            font-size: 14px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .add-role-container button:hover {
            background-color: #27ae60;
        }
    </style>
</head>
<body>
    <h1>角色知识库配置</h1>

    <!-- 新增角色 -->
    <div class="add-role-container">
        <input type="text" id="new-role-name" placeholder="输入新角色名称">
        <button id="add-role-btn">新增角色</button>
    </div>

    <div id="roles-container"></div>

    <script>
        const rolesContainer = document.getElementById('roles-container');
        const addRoleBtn = document.getElementById('add-role-btn');
        const newRoleNameInput = document.getElementById('new-role-name');
        const knowledgeTypes = ["房源", "客源", "商机", "业绩", "带看", "经纪人量", "门店量"];

        function createRoleRow(roleName) {
            const roleContainer = document.createElement('div');
            roleContainer.className = 'role-container';

            // 第一行：角色名 + 操作按钮 + 知识库输入
            const roleRow = document.createElement('div');
            roleRow.className = 'role-row';

            const roleNameElement = document.createElement('div');
            roleNameElement.className = 'role-name';
            roleNameElement.textContent = roleName;

            const knowledgeInputGroup = document.createElement('div');
            knowledgeInputGroup.className = 'knowledge-input-group';

            const knowledgeSelect = document.createElement('select');
            knowledgeTypes.forEach((type) => {
                const option = document.createElement('option');
                option.value = type;
                option.textContent = type;
                knowledgeSelect.appendChild(option);
            });

            const knowledgeIdInput = document.createElement('input');
            knowledgeIdInput.type = 'text';
            knowledgeIdInput.placeholder = '输入知识库ID/名称';

            const addKnowledgeBtn = document.createElement('button');
            addKnowledgeBtn.className = 'add-knowledge-btn';
            addKnowledgeBtn.textContent = '添加知识库';

            const deleteRoleBtn = document.createElement('button');
            deleteRoleBtn.className = 'delete-role-btn';
            deleteRoleBtn.textContent = '删除角色';

            const toggleRoleBtn = document.createElement('button');
            toggleRoleBtn.className = 'toggle-role-btn';
            toggleRoleBtn.textContent = '禁用角色';
            let isRoleEnabled = true;

            toggleRoleBtn.addEventListener('click', () => {
                isRoleEnabled = !isRoleEnabled;
                toggleRoleBtn.textContent = isRoleEnabled ? '禁用角色' : '启用角色';
                roleContainer.style.opacity = isRoleEnabled ? '1' : '0.5';
            });

            deleteRoleBtn.addEventListener('click', () => {
                rolesContainer.removeChild(roleContainer);
            });

            // 知识库列表
            const knowledgeList = document.createElement('div');
            knowledgeList.className = 'knowledge-list';

            addKnowledgeBtn.addEventListener('click', () => {
                const selectedType = knowledgeSelect.value;
                const id = knowledgeIdInput.value.trim();
                if (!id) {
                    alert('请填写知识库ID/名称');
                    return;
                }

                const knowledgeItem = document.createElement('div');
                knowledgeItem.className = 'knowledge-item';

                const enableCheckbox = document.createElement('input');
                enableCheckbox.type = 'checkbox';
                enableCheckbox.checked = true;

                const knowledgeText = document.createElement('span');
                knowledgeText.textContent = `类型: ${selectedType}, ID: ${id}`;

                const editButton = document.createElement('button');
                editButton.textContent = '编辑';
                editButton.style.backgroundColor = '#f39c12';
                editButton.style.color = '#fff';
                editButton.addEventListener('click', () => {
                    const newType = prompt('修改知识库类型:', selectedType);
                    const newId = prompt('修改知识库ID/名称:', id);
                    if (newType && newId) {
                        knowledgeText.textContent = `类型: ${newType}, ID: ${newId}`;
                    }
                });

                const deleteButton = document.createElement('button');
                deleteButton.textContent = '删除';
                deleteButton.addEventListener('click', () => {
                    knowledgeList.removeChild(knowledgeItem);
                });

                knowledgeItem.appendChild(enableCheckbox);
                knowledgeItem.appendChild(knowledgeText);
                knowledgeItem.appendChild(editButton);
                knowledgeItem.appendChild(deleteButton);

                knowledgeList.appendChild(knowledgeItem);

                // 清空输入框
                knowledgeIdInput.value = '';
            });

            knowledgeInputGroup.appendChild(knowledgeSelect);
            knowledgeInputGroup.appendChild(knowledgeIdInput);

            roleRow.appendChild(roleNameElement);
            roleRow.appendChild(knowledgeInputGroup);
            roleRow.appendChild(addKnowledgeBtn);
            roleRow.appendChild(toggleRoleBtn);
            roleRow.appendChild(deleteRoleBtn);

            roleContainer.appendChild(roleRow);
            roleContainer.appendChild(knowledgeList);

            rolesContainer.appendChild(roleContainer);
        }

        addRoleBtn.addEventListener('click', () => {
            const roleName = newRoleNameInput.value.trim();
            if (!roleName) {
                alert('请输入角色名称');
                return;
            }
            createRoleRow(roleName);
            newRoleNameInput.value = '';
        });

        // 初始化默认角色
        ["全国", "区域", "城市", "大部", "大区", "CA", "门店"].forEach((role) => {
            createRoleRow(role);
        });
    </script>


</body></html>