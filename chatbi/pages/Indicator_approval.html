<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>指标准入管理系统</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .header h1 {
            font-size: 22px;
            color: #333;
        }
        
        .filter-area {
            background-color: #f9f9f9;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 12px;
            align-items: center;
            justify-content: space-between;
        }
        
        .filter-item {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 250px;
            width: calc(25% - 15px);
        }
        
        .filter-item label {
            font-size: 14px;
            color: #606266;
            white-space: nowrap;
            width: 100px;
            text-align: right;
        }
        
        .filter-item select, .filter-item input {
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 14px;
            min-width: 120px;
            outline: none;
            flex: 1;
        }
        
        .filter-item select:focus, .filter-item input:focus {
            border-color: #409eff;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .search-box input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            outline: none;
        }
        
        .search-box input:focus {
            border-color: #409eff;
        }
        
        .search-box button {
            padding: 0 20px;
            background-color: #409eff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .search-box button:hover {
            background-color: #66b1ff;
        }
        
        /* 突出准入状态筛选器 */
        .admission-status-filter {
            background-color: #ecf5ff;
            border: 1px solid #d9ecff;
            border-radius: 4px;
            padding: 10px 15px;
        }
        
        .admission-status-filter label {
            color: #409eff;
            font-weight: bold;
        }
        
        .admission-status-filter select {
            border-color: #409eff;
        }
        
        /* 表格区域 */
        .table-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .batch-actions {
            display: flex;
            gap: 10px;
        }
        
        .batch-actions.selection-actions {
            display: none; /* 初始隐藏，多选时显示 */
        }
        
        .batch-actions.selection-actions.active {
            display: flex;
        }
        
        .table-actions button {
            padding: 8px 16px;
            background-color: #409eff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .table-actions button:hover {
            background-color: #66b1ff;
        }
        
        .table-actions button.secondary {
            background-color: #67c23a;
        }
        
        .table-actions button.secondary:hover {
            background-color: #85ce61;
        }
        
        .table-actions button.upload {
            background-color: #909399;
        }
        
        .table-actions button.upload:hover {
            background-color: #a6a9ad;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }
        
        th, td {
            padding: 12px 8px;
            text-align: left;
            font-size: 14px;
            border-bottom: 1px solid #ebeef5;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        th {
            background-color: #f5f7fa;
            color: #606266;
            font-weight: bold;
        }
        
        tr:hover {
            background-color: #f5f7fa;
        }
        
        .indicator-link {
            color: #409eff;
            text-decoration: none;
        }
        
        .indicator-link:hover {
            text-decoration: underline;
        }
        
        .editable {
            cursor: pointer;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .editable:hover {
            background-color: #ecf5ff;
        }
        
        .editable input {
            width: 100%;
            padding: 2px 5px;
            border: 1px solid #dcdfe6;
            border-radius: 3px;
        }
        
        .switch-toggle {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }
        
        .switch-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #409eff;
        }
        
        input:focus + .slider {
            box-shadow: 0 0 1px #409eff;
        }
        
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        
        .dropdown-select {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        
        .dropdown-select:hover {
            color: #409eff;
        }
        
        .verify-btn {
            padding: 2px 8px;
            background-color: #909399;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .verify-btn:hover {
            background-color: #a6a9ad;
        }
        
        .verify-btn.success {
            background-color: #67c23a;
        }
        
        .verify-status {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .status-dot.success {
            background-color: #67c23a;
        }
        
        .status-dot.pending {
            background-color: #e6a23c;
        }
        
        .status-dot.fail {
            background-color: #f56c6c;
        }
        
        .checkbox-custom {
            position: relative;
            width: 16px;
            height: 16px;
            cursor: pointer;
        }
        
        /* 分页器 */
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 5px;
        }
        
        .pagination button {
            padding: 5px 10px;
            border: 1px solid #d9d9d9;
            background-color: white;
            cursor: pointer;
            border-radius: 3px;
        }
        
        .pagination button:hover, .pagination button.active {
            color: #409eff;
            border-color: #409eff;
        }
        
        /* 弹窗样式 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: bold;
        }
        
        .close-btn {
            font-size: 24px;
            cursor: pointer;
            background: none;
            border: none;
        }
        
        .close-btn:hover {
            color: #409eff;
        }
        
        .table-wrapper {
            overflow-x: auto;
        }
        
        /* 响应式适配 */
        @media screen and (max-width: 768px) {
            .filter-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .filter-item {
                width: 100%;
            }
            
            .filter-item select, .filter-item input {
                width: 100%;
            }
            
            table {
                min-width: 1200px;
            }
        }
        
        /* 新增审批中状态样式 */
        .status-dot.approving {
            background-color: #e6a23c;
        }
        
        .verify-btn.approving {
            background-color: #e6a23c;
            font-weight: bold;
        }
        
        /* 审批中状态的文本闪烁动画 */
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .verify-btn.approving {
            animation: blink 1.5s infinite;
        }
        
        /* 标签样式 */
        .tag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .tag {
            background-color: #ecf5ff;
            color: #409eff;
            border: 1px solid #d9ecff;
            border-radius: 4px;
            padding: 2px 8px;
            font-size: 12px;
            display: flex;
            align-items: center;
            white-space: nowrap;
        }
        
        .tag .close {
            margin-left: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .tag .close:hover {
            color: #f56c6c;
        }
        
        .multi-select-dropdown {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .multi-select-dropdown .dropdown-container {
            position: absolute;
            top: 100%;
            left: 0;
            z-index: 10;
            width: 100%;
            background: white;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }
        
        .multi-select-dropdown .dropdown-item {
            padding: 8px 12px;
            cursor: pointer;
        }
        
        .multi-select-dropdown .dropdown-item:hover {
            background-color: #f5f7fa;
        }
        
        .multi-select-dropdown .dropdown-item.selected {
            background-color: #ecf5ff;
            color: #409eff;
        }
        
        .multi-select-dropdown .dropdown-toggle {
            width: 100%;
            cursor: pointer;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 14px;
            background-color: white;
            text-align: left;
            position: relative;
        }
        
        .multi-select-dropdown .dropdown-toggle::after {
            content: '';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid #606266;
        }
        
        /* 准入按钮状态样式 */
        .verify-btn.success {
            background-color: #67c23a;
        }
        
        .verify-btn.processing {
            background-color: #e6a23c;  /* 橙色 */
        }
        
        .verify-btn.approved {
            background-color: #409eff;  /* 蓝色 */
        }
        
        /* 统计周期选择器样式 */
        .period-selector {
            position: relative;
            width: 100%;
            padding: 2px;
        }
        
        .period-selector .period-options {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 5px;
        }
        
        .period-selector .period-option {
            border: 1px solid #dcdfe6;
            background-color: #f5f7fa;
            color: #606266;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .period-selector .period-option:hover {
            border-color: #c6e2ff;
            background-color: #ecf5ff;
            color: #409eff;
        }
        
        .period-selector .period-option.selected {
            background-color: #409eff;
            color: white;
            border-color: #409eff;
        }
        
        .period-selector .add-button {
            border: 1px dashed #dcdfe6;
            background-color: transparent;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            color: #606266;
        }
        
        .period-selector .add-button:hover {
            color: #409eff;
            border-color: #409eff;
        }
        
        /* 统计周期标签样式 */
        .period-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .period-tag {
            border: 1px solid #dcdfe6;
            background-color: #f5f7fa;
            color: #606266;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .period-tag:hover {
            border-color: #c6e2ff;
            background-color: #ecf5ff;
            color: #409eff;
        }
        
        .period-tag.selected {
            background-color: #409eff;
            color: white;
            border-color: #409eff;
        }
        
        /* 自定义下拉/输入框组合样式 */
        .custom-select {
            position: relative;
            width: 100%;
        }
        
        .custom-select input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            font-size: 14px;
            outline: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23606266' d='M6 8.825L1.175 4 2.05 3.125 6 7.075l3.95-3.95L10.825 4z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            cursor: pointer;
        }
        
        .custom-select input:focus {
            border-color: #409eff;
            box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2);
        }
        
        /* 表格单元格可编辑样式优化 */
        .dropdown-input-cell {
            position: relative;
        }
        
        .dropdown-input-cell input {
            width: 100%;
            padding: 4px 8px;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            font-size: 14px;
            outline: none;
        }
        
        .dropdown-input-cell input:focus {
            border-color: #409eff;
            box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>指标准入管理系统</h1>
        </div>
        
        <!-- 筛选器区域 -->
        <div class="filter-area">
            <div class="filter-row">
                <div class="filter-item">
                    <label>一级分类:</label>
                    <div class="custom-select">
                        <input type="text" placeholder="请输入或选择一级分类" list="level1Options">
                        <datalist id="level1Options">
                            <option value=""></option>
                            <option value="贝壳城市"></option>
                            <option value="北链"></option>
                            <option value="整装"></option>
                        </datalist>
                    </div>
                </div>
                <div class="filter-item">
                    <label>二级分类:</label>
                    <div class="custom-select">
                        <input type="text" placeholder="请输入或选择二级分类" list="level2Options">
                        <datalist id="level2Options">
                            <option value=""></option>
                            <option value="二手"></option>
                            <option value="新房"></option>
                            <option value="房源"></option>
                            <option value="商机"></option>
                            <option value="行指"></option>
                        </datalist>
                    </div>
                </div>
                <div class="filter-item">
                    <label>三级分类:</label>
                    <div class="custom-select">
                        <input type="text" placeholder="请输入或选择三级分类" list="level3Options">
                        <datalist id="level3Options">
                            <option value=""></option>
                            <option value="好房"></option>
                            <option value="议价"></option>
                            <option value="房评"></option>
                        </datalist>
                    </div>
                </div>
                <div class="filter-item">
                    <label>四级分类:</label>
                    <div class="custom-select">
                        <input type="text" placeholder="请输入或选择四级分类" list="level4Options">
                        <datalist id="level4Options">
                            <option value=""></option>
                            <option value="A"></option>
                            <option value="B"></option>
                            <option value="C"></option>
                            <option value="D"></option>
                            <option value="E"></option>
                        </datalist>
                    </div>
                </div>
            </div>
            
            <div class="filter-row">
                <div class="filter-item">
                    <label>重要程度:</label>
                    <select>
                        <option value="">全部</option>
                        <option value="核心">核心</option>
                        <option value="重要">重要</option>
                        <option value="一般">一般</option>
                        <option value="次要">次要</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>指标负责人:</label>
                    <select>
                        <option value="">全部</option>
                        <option value="张三">张三</option>
                        <option value="李四">李四</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>数据负责人:</label>
                    <select>
                        <option value="">全部</option>
                        <option value="王五">王五</option>
                        <option value="赵六">赵六</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>项目:</label>
                    <select>
                        <option value="">全部</option>
                        <option value="A项目">A项目</option>
                        <option value="B项目">B项目</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-row">
                <div class="filter-item">
                    <label>场景标签:</label>
                    <select>
                        <option value="">全部</option>
                        <option value="用户画像">用户画像</option>
                        <option value="业绩评估">业绩评估</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>认证状态:</label>
                    <select>
                        <option value="">全部</option>
                        <option value="已认证">已认证</option>
                        <option value="未认证">未认证</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>认证等级:</label>
                    <select>
                        <option value="">全部</option>
                        <option value="A级">A级</option>
                        <option value="B级">B级</option>
                        <option value="C级">C级</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>指标类型:</label>
                    <select>
                        <option value="">全部</option>
                        <option value="基础">基础</option>
                        <option value="派生">派生</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-row">
                <div class="filter-item">
                    <label>指标别名:</label>
                    <input type="text" placeholder="请输入指标别名">
                </div>
                <div class="filter-item admission-status-filter">
                    <label>准入状态:</label>
                    <select>
                        <option value="">全部</option>
                        <option value="1">已准入</option>
                        <option value="0">未准入</option>
                        <option value="pending">待审核</option>
                    </select>
                </div>
                <div class="filter-item"></div>
                <div class="filter-item"></div>
            </div>
            
            <div class="search-box">
                <input type="text" placeholder="搜索指标名称或ID">
                <button>搜索</button>
            </div>
        </div>
        
        <!-- 列表区域 -->
        <div class="table-actions">
            <div class="batch-actions">
                <button>批量检测</button>
                <button>批量准入</button>
                <button>批量下载</button>
            </div>
            <div class="batch-actions selection-actions">
                <button>批量下载</button>
                <button>批量检测</button>
                <button>批量准入</button>
            </div>
            <div>
                <button class="secondary">下载模板</button>
                <button class="upload">上传</button>
                <button class="upload" id="showVersionBtn">上传版本记录</button>
            </div>
        </div>
        
        <div class="table-wrapper">
            <table id="indicatorTable">
                <thead>
                    <tr>
                        <th width="40px" data-column="checkbox">
                            <input type="checkbox" class="checkbox-custom" id="selectAll">
                        </th>
                        <th width="80px" data-column="id">指标ID</th>
                        <th width="150px" data-column="name">指标名称</th>
                        <th width="120px" data-column="alias">指标别名</th>
                        <th width="100px" data-column="level1">一级分类</th>
                        <th width="80px" data-column="priority">二级分类</th>
                        <th width="80px" data-column="importance">三级分类</th>
                        <th width="80px" data-column="source">四级分类</th>
                        <th width="100px" data-column="status">准入状态</th>
                        <th width="120px" data-column="period">支持的统计周期</th>
                        <th width="100px" data-column="dataType">数值类型</th>
                        <th width="90px" data-column="decimal">保留小数位</th>
                        <th width="120px" data-column="dimension">默认筛选维度</th>
                        <th width="120px" data-column="action">操作</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        
        <div class="pagination">
            <button>&lt;</button>
            <button class="active">1</button>
            <button>2</button>
            <button>3</button>
            <button>&gt;</button>
        </div>
    </div>
    
    <!-- 版本记录弹窗 -->
    <div class="modal" id="versionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">上传版本记录</h3>
                <button class="close-btn">&times;</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>版本</th>
                        <th>上传时间</th>
                        <th>上传者</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>v1.2.0</td>
                        <td>2025-03-16 14:30:25</td>
                        <td>张三</td>
                        <td><button class="verify-btn">下载</button></td>
                    </tr>
                    <tr>
                        <td>v1.1.5</td>
                        <td>2025-03-10 09:15:38</td>
                        <td>李四</td>
                        <td><button class="verify-btn">下载</button></td>
                    </tr>
                    <tr>
                        <td>v1.1.0</td>
                        <td>2025-03-05 16:42:11</td>
                        <td>王五</td>
                        <td><button class="verify-btn">下载</button></td>
                    </tr>
                    <tr>
                        <td>v1.0.0</td>
                        <td>2025-03-01 10:20:45</td>
                        <td>赵六</td>
                        <td><button class="verify-btn">下载</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <script>
        // 表格数据
        const tableData = [
            {
                id: 'KPI001',
                name: '用户活跃度',
                alias: '活跃度,UAV',
                priority: '二手',
                importance: '好房',
                source: 'A',
                level1: '贝壳城市',
                status: true,
                period: ['日', '周', '月'],
                dataType: '百分数',
                decimal: '2',
                dimension: '区域,渠道',
                verifyStatus: 'success',
                verifyText: '检测通过',
                canAdmit: true,
                admitStatus: ''  // 空字符串表示未准入，'processing'表示审批中，'approved'表示已准入
            },
            {
                id: 'KPI002',
                name: '转化率',
                alias: 'CVR',
                priority: '新房',
                importance: '议价',
                source: 'B',
                level1: '北链',
                status: false,
                period: ['日', '月', '季', '年'],
                dataType: '百分数',
                decimal: '2',
                dimension: '产品,渠道',
                verifyStatus: 'pending',
                verifyText: '检测',
                canAdmit: false,
                admitStatus: ''
            },
            {
                id: 'KPI003',
                name: '销售额',
                alias: 'GMV,销售总额',
                priority: '房源',
                importance: '好房',
                source: 'A',
                level1: '贝壳城市',
                status: true,
                period: ['日', '周', '月', '季', '年'],
                dataType: '整数',
                decimal: '0',
                dimension: '产品,区域',
                verifyStatus: 'success',
                verifyText: '检测通过',
                canAdmit: true,
                admitStatus: ''
            },
            {
                id: 'KPI004',
                name: '客单价',
                alias: 'ARPU',
                priority: '商机',
                importance: '房评',
                source: 'C',
                level1: '整装',
                status: false,
                period: ['月', '季', '年'],
                dataType: '小数',
                decimal: '2',
                dimension: '产品,用户等级',
                verifyStatus: 'fail',
                verifyText: '检测失败',
                canAdmit: false,
                admitStatus: ''
            },
            {
                id: 'KPI005',
                name: '用户留存率',
                alias: '留存率,RR',
                priority: '行指',
                importance: '议价',
                source: 'D',
                level1: '北链',
                status: true,
                period: ['周', '月'],
                dataType: '百分数',
                decimal: '2',
                dimension: '渠道,注册日期',
                verifyStatus: 'success',
                verifyText: '检测通过',
                canAdmit: true,
                admitStatus: ''
            }
        ];
        
        // 下拉选项配置
        const dropdownOptions = {
            priority: ['二手', '新房', '房源', '商机', '行指'],
            importance: ['好房', '议价', '房评'],
            source: ['A', 'B', 'C', 'D', 'E'],
            level1: ['贝壳城市', '北链', '整装'],
            level4: ['A', 'B', 'C', 'D', 'E'],
            period: ['日', '周', '月', '季', '年'],
            dataType: ['整数', '小数', '百分数', '自动']
        };
        
        // 渲染表格
        function renderTable() {
            const tbody = document.querySelector('#indicatorTable tbody');
            tbody.innerHTML = '';
            
            tableData.forEach((row, rowIndex) => {
                const tr = document.createElement('tr');
                tr.dataset.rowIndex = rowIndex;
                
                // 构建行HTML
                tr.innerHTML = `
                    <td data-column="checkbox"><input type="checkbox" class="checkbox-custom row-checkbox"></td>
                    <td data-column="id">${row.id}</td>
                    <td data-column="name"><a href="#" class="indicator-link">${row.name}</a></td>
                    <td data-column="alias" class="editable" data-field="alias">${row.alias}</td>
                    <td data-column="level1" class="dropdown-input-cell" data-field="level1">
                        <input type="text" value="${row.level1}" list="level1List" class="category-input">
                        <datalist id="level1List">
                            ${dropdownOptions.level1.map(option => `<option value="${option}"></option>`).join('')}
                        </datalist>
                    </td>
                    <td data-column="priority" class="dropdown-input-cell" data-field="priority">
                        <input type="text" value="${row.priority}" list="priorityList" class="category-input">
                        <datalist id="priorityList">
                            ${dropdownOptions.priority.map(option => `<option value="${option}"></option>`).join('')}
                        </datalist>
                    </td>
                    <td data-column="importance" class="dropdown-input-cell" data-field="importance">
                        <input type="text" value="${row.importance}" list="importanceList" class="category-input">
                        <datalist id="importanceList">
                            ${dropdownOptions.importance.map(option => `<option value="${option}"></option>`).join('')}
                        </datalist>
                    </td>
                    <td data-column="source" class="dropdown-input-cell" data-field="source">
                        <input type="text" value="${row.source}" list="sourceList" class="category-input">
                        <datalist id="sourceList">
                            ${dropdownOptions.source.map(option => `<option value="${option}"></option>`).join('')}
                        </datalist>
                    </td>
                    <td data-column="status">
                        <label class="switch-toggle">
                            <input type="checkbox" ${row.status ? 'checked' : ''}>
                            <span class="slider"></span>
                        </label>
                    </td>
                    <td data-column="period" class="period-cell" data-field="period">
                        <div class="period-tags">
                            <div class="period-tag ${row.period.includes('日') ? 'selected' : ''}" data-value="日">日</div>
                            <div class="period-tag ${row.period.includes('周') ? 'selected' : ''}" data-value="周">周</div>
                            <div class="period-tag ${row.period.includes('月') ? 'selected' : ''}" data-value="月">月</div>
                            <div class="period-tag ${row.period.includes('季') ? 'selected' : ''}" data-value="季">季</div>
                            <div class="period-tag ${row.period.includes('年') ? 'selected' : ''}" data-value="年">年</div>
                        </div>
                    </td>
                    <td data-column="dataType" class="datatype-cell" data-field="dataType">${row.dataType}</td>
                    <td data-column="decimal" class="decimal-cell" data-field="decimal">
                        <input type="number" value="${row.decimal}" min="0" max="10" style="width:90%; text-align:center; border:1px solid #dcdfe6; border-radius:4px; padding:4px 8px; outline:none; transition:all 0.3s;">
                    </td>
                    <td data-column="dimension">
                        <input type="text" value="${row.dimension}" style="width:90%; border:1px solid #dcdfe6; border-radius:4px; padding:4px 8px; outline:none; transition:all 0.3s;">
                    </td>
                    <td data-column="action">
                        <div class="verify-status">
                            <span class="status-dot ${row.verifyStatus}"></span>
                            <button class="verify-btn ${row.verifyStatus === 'success' ? 'success' : ''} ${row.admitStatus}">${row.verifyText}</button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(tr);
            });
            
            // 添加事件监听
            bindTableEvents();
        }
        
        // 绑定表格事件
        function bindTableEvents() {
            // 复选框事件
            const allCheckbox = document.getElementById('selectAll');
            const rowCheckboxes = document.querySelectorAll('.row-checkbox');
            
            allCheckbox.addEventListener('change', function() {
                rowCheckboxes.forEach(cb => cb.checked = this.checked);
                toggleBatchActions();
            });
            
            rowCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', toggleBatchActions);
            });
            
            // 可编辑单元格事件
            document.querySelectorAll('.editable').forEach(cell => {
                cell.addEventListener('click', function() {
                    const currentText = this.textContent;
                    this.innerHTML = `<input type="text" value="${currentText}">`;
                    const input = this.querySelector('input');
                    input.focus();
                    
                    const field = this.dataset.field;
                    const rowIndex = this.closest('tr').dataset.rowIndex;
                    
                    input.addEventListener('blur', function() {
                        cell.textContent = this.value;
                        // 更新数据
                        tableData[rowIndex][field] = this.value;
                    });
                    
                    input.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            cell.textContent = this.value;
                            // 更新数据
                            tableData[rowIndex][field] = this.value;
                        }
                    });
                });
            });
            
            // 分类输入框事件
            document.querySelectorAll('.category-input').forEach(input => {
                const field = input.closest('td').dataset.field;
                const rowIndex = input.closest('tr').dataset.rowIndex;
                
                // 添加焦点样式
                input.addEventListener('focus', function() {
                    this.style.borderColor = '#409eff';
                    this.style.boxShadow = '0 0 0 2px rgba(64, 158, 255, 0.2)';
                });
                
                input.addEventListener('blur', function() {
                    this.style.borderColor = '#dcdfe6';
                    this.style.boxShadow = 'none';
                    // 更新数据
                    tableData[rowIndex][field] = this.value;
                });
                
                input.addEventListener('change', function() {
                    // 更新数据
                    tableData[rowIndex][field] = this.value;
                });
                
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        this.blur();
                    }
                });
            });
            
            // 维度输入框事件
            document.querySelectorAll('td[data-column="dimension"] input').forEach(input => {
                const rowIndex = input.closest('tr').dataset.rowIndex;
                
                input.addEventListener('change', function() {
                    tableData[rowIndex].dimension = this.value;
                });
                
                // 添加焦点样式
                input.addEventListener('focus', function() {
                    this.style.borderColor = '#409eff';
                    this.style.boxShadow = '0 0 0 2px rgba(64, 158, 255, 0.2)';
                });
                
                input.addEventListener('blur', function() {
                    this.style.borderColor = '#dcdfe6';
                    this.style.boxShadow = 'none';
                });
                
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        this.blur();
                    }
                });
            });
            
            // 状态切换事件
            document.querySelectorAll('td[data-column="status"] input[type="checkbox"]').forEach(checkbox => {
                const rowIndex = checkbox.closest('tr').dataset.rowIndex;
                
                checkbox.addEventListener('change', function() {
                    tableData[rowIndex].status = this.checked;
                });
            });
            
            // 绑定操作按钮事件
            document.querySelectorAll('.verify-btn').forEach(button => {
                const rowIndex = button.closest('tr').dataset.rowIndex;
                
                button.addEventListener('click', function() {
                    const row = tableData[rowIndex];
                    
                    // 检测按钮点击逻辑
                    if (row.verifyStatus === 'pending' || row.verifyStatus === 'fail') {
                        // 假设检测通过
                        row.verifyStatus = 'success';
                        row.verifyText = '检测通过';
                        row.canAdmit = true;
                        row.admitStatus = '';
                        this.classList.add('success');
                        
                        // 更新状态点颜色
                        const statusDot = this.previousElementSibling;
                        statusDot.className = 'status-dot success';
                        
                        // 更新按钮文本
                        this.textContent = '检测通过';
                    } 
                    // 已检测通过，点击进入准入流程
                    else if (row.verifyStatus === 'success' && row.canAdmit) {
                        // 进入审批中状态
                        row.verifyStatus = 'success';
                        row.verifyText = '准入中';
                        row.canAdmit = false;
                        row.admitStatus = 'processing';
                        
                        // 更新按钮样式和文本
                        this.classList.remove('success');
                        this.classList.add('processing');
                        
                        // 更新按钮文本
                        this.textContent = '准入中';
                        
                        // 模拟审批过程，3秒后自动变为已准入状态
                        setTimeout(() => {
                            // 更新数据状态
                            row.status = true;
                            row.verifyStatus = 'success';
                            row.verifyText = '已准入';
                            row.canAdmit = false;
                            row.admitStatus = 'approved';
                            
                            // 更新UI状态
                            this.classList.remove('processing');
                            this.classList.add('approved');
                            this.textContent = '已准入';
                            
                            // 更新准入状态开关
                            const statusToggle = button.closest('tr').querySelector('td[data-column="status"] input[type="checkbox"]');
                            statusToggle.checked = true;
                        }, 3000);
                    }
                });
            });
            
            // 统计周期标签点击事件
            document.querySelectorAll('.period-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    const value = this.dataset.value;
                    const rowIndex = this.closest('tr').dataset.rowIndex;
                    
                    // 切换选中状态
                    this.classList.toggle('selected');
                    
                    // 更新数据
                    if (this.classList.contains('selected')) {
                        // 添加到数组中
                        if (!tableData[rowIndex].period.includes(value)) {
                            tableData[rowIndex].period.push(value);
                        }
                    } else {
                        // 从数组中移除
                        const index = tableData[rowIndex].period.indexOf(value);
                        if (index > -1) {
                            tableData[rowIndex].period.splice(index, 1);
                        }
                    }
                });
            });
            
            // 数值类型下拉单元格事件
            document.querySelectorAll('.datatype-cell').forEach(cell => {
                cell.addEventListener('click', function(e) {
                    e.stopPropagation(); // 防止事件冒泡
                    
                    const field = this.dataset.field;
                    const rowIndex = this.closest('tr').dataset.rowIndex;
                    const currentValue = this.textContent;
                    const options = dropdownOptions[field];
                    
                    // 确保只创建一个下拉框
                    const existingSelect = this.querySelector('select');
                    if (existingSelect) return;
                    
                    let selectHTML = '<select>';
                    options.forEach(option => {
                        selectHTML += `<option value="${option}" ${option === currentValue ? 'selected' : ''}>${option}</option>`;
                    });
                    selectHTML += '</select>';
                    
                    this.innerHTML = selectHTML;
                const select = this.querySelector('select');
                select.focus();
                    
                    // 防止点击select本身导致失焦
                    select.addEventListener('click', function(e) {
                        e.stopPropagation();
                    });
                
                select.addEventListener('change', function() {
                        const newValue = this.value;
                        // 延迟替换文本内容，确保值已经更新
                        setTimeout(() => {
                            cell.textContent = newValue;
                            // 更新数据
                            tableData[rowIndex][field] = newValue;
                        }, 100);
                    });
                    
                    // 在document上监听点击，以便在点击其他地方时关闭下拉框
                    const closeDropdown = function(e) {
                        if (!cell.contains(e.target)) {
                            const selectedValue = select.value;
                            cell.textContent = selectedValue;
                            // 更新数据
                            tableData[rowIndex][field] = selectedValue;
                            document.removeEventListener('click', closeDropdown);
                        }
                    };
                    
                    // 延迟添加事件监听，防止当前点击事件导致下拉框立即关闭
                    setTimeout(() => {
                        document.addEventListener('click', closeDropdown);
                    }, 0);
                });
            });
            
            // 小数位输入框事件
            document.querySelectorAll('td[data-column="decimal"] input').forEach(input => {
                const rowIndex = input.closest('tr').dataset.rowIndex;
                
                input.addEventListener('change', function() {
                    // 确保输入的是有效数字
                    let value = parseInt(this.value);
                    
                    // 设置范围限制
                    if (isNaN(value)) value = 0;
                    if (value < 0) value = 0;
                    if (value > 10) value = 10;
                    
                    this.value = value;
                    tableData[rowIndex].decimal = value.toString();
                });
                
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        this.blur();
                    }
                });
                
                // 添加焦点样式
                input.addEventListener('focus', function() {
                    this.style.borderColor = '#409eff';
                    this.style.boxShadow = '0 0 0 2px rgba(64, 158, 255, 0.2)';
                });
                
                input.addEventListener('blur', function() {
                    this.style.borderColor = '#dcdfe6';
                    this.style.boxShadow = 'none';
                });
            });
        }
        
        // 切换批量操作按钮的显示/隐藏
        function toggleBatchActions() {
            const anyChecked = Array.from(document.querySelectorAll('.row-checkbox')).some(checkbox => checkbox.checked);
            const batchActions = document.querySelector('.batch-actions.selection-actions');
            
            if (anyChecked) {
                batchActions.classList.add('active');
            } else {
                batchActions.classList.remove('active');
            }
        }
        
        // 版本记录弹窗
        const versionBtn = document.getElementById('showVersionBtn');
        const versionModal = document.getElementById('versionModal');
        const versionCloseBtn = versionModal.querySelector('.close-btn');
        
        versionBtn.addEventListener('click', function() {
            versionModal.style.display = 'flex';
        });
        
        versionCloseBtn.addEventListener('click', function() {
            versionModal.style.display = 'none';
        });
        
        // 点击弹窗外部关闭弹窗
        window.addEventListener('click', function(event) {
            if (event.target === versionModal) {
                versionModal.style.display = 'none';
            }
        });
        
        // 初始化表格
        document.addEventListener('DOMContentLoaded', function() {
            renderTable();
        });
    </script>
</body>
</html>
