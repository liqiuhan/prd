# 指标圈选工具需求文档

## 1. 系统概述

指标圈选工具是一个用于帮助用户定义、选择和管理业务指标的Web应用。系统允许用户按照层级关系（如业务域、业务线、指标分类等）选择和组织相关的业务指标，并创建角色包与指标之间的关联关系，以支持业务分析和决策。

## 2. 功能需求

### 2.1 首页功能

#### 2.1.1 角色包-指标关系列表
- 显示已创建的角色包与指标关系的列表
- 列表应包含以下信息：角色包名称、应用入口、指标数量、配置人、维护人、创建时间、修改时间
- 提供编辑、预览、添加维护人和删除操作

#### 2.1.2 新建关系功能
- 提供创建新的角色包-指标关系的入口
- 点击后进入多步骤配置流程

### 2.2 多步骤配置流程

#### 2.2.1 步骤导航
- 清晰的步骤指示器，显示当前所处步骤
- 步骤间切换的前进后退控制
- 步骤完成状态标记（已完成、当前、未完成）

#### 2.2.2 步骤1：基础信息设置
- 角色包选择功能（支持搜索）
- 应用入口选择功能（支持搜索）
- 表单验证确保必要信息已填写

#### 2.2.3 步骤2：指标选择
- 提供多层级的指标选择界面
- 层级包括：业务域、业务线、指标分类、指标类型、指标名称
- 每个层级支持全选功能
- 选择上层选项后，显示对应的下层选项
- 动态构建指标路径，以思维导图形式展示已选指标
- 支持删除已选指标

#### 2.2.4 步骤3：分析路径配置
- 基于已选指标，配置分析路径
- 以思维导图形式展示分析路径
- 支持跳过此步骤的选项

#### 2.2.5 步骤4：信息确认和保存
- 显示配置预览，包括基础信息和完整的指标路径
- 输入维护人信息
- 保存功能验证必填信息

### 2.3 思维导图功能

#### 2.3.1 指标路径可视化
- 将选择的多层级指标以思维导图形式展示
- 每个节点显示层级名称
- 节点间通过曲线连接，清晰表示层级关系
- 支持删除节点操作

#### 2.3.2 分析路径可视化
- 类似指标路径，但特定用于分析视角

### 2.4 预览功能

#### 2.4.1 详细信息展示
- 显示角色包、应用入口、配置人、维护人等基本信息
- 显示完整的指标思维导图
- 提供返回主页的选项

## 3. 用户界面需求

### 3.1 整体布局与风格
- 简洁现代的卡片式设计
- 白色背景配合蓝色主题色
- 响应式设计，适配不同屏幕尺寸

### 3.2 组件样式

#### 3.2.1 按钮设计
- 主要操作按钮：蓝色背景，白色文字
- 次要操作按钮：白色背景，蓝色边框和文字
- 危险操作按钮：红色
- 成功操作按钮：绿色
- 所有按钮需要有悬停效果

#### 3.2.2 选择器与下拉菜单
- 搜索输入框支持实时过滤
- 下拉选项列表有高亮和选中状态
- 支持键盘导航

#### 3.2.3 复选框组
- 层级分明的复选框列表
- 全选功能在每组顶部
- 选中状态有明显视觉标识

#### 3.2.4 思维导图视觉设计
- 节点使用圆角矩形，有边框和阴影
- 连接线使用曲线，平滑过渡
- 节点悬停效果：轻微上浮和阴影增强
- 删除按钮内嵌于节点

### 3.3 步骤导航设计
- 使用圆形数字标识每个步骤
- 已完成步骤使用绿色标记
- 当前步骤使用蓝色标记
- 步骤间连线表示进度

### 3.4 表格设计
- 清晰的行列结构
- 行悬停效果
- 操作按钮组合排布
- 自适应列宽

## 4. 技术要求

### 4.1 前端技术
- 使用HTML5、CSS3和JavaScript实现
- 使用D3.js库实现思维导图可视化
- 不依赖其他前端框架
- 使用现代ES6+语法

### 4.2 交互性能
- 层级选择实时响应，无明显延迟
- 思维导图渲染流畅
- 页面切换无闪烁
- 支持键盘快捷操作

### 4.3 可扩展性
- 指标体系支持动态扩展
- 页面组件结构化，便于维护和扩展

## 5. 数据交互

### 5.1 数据存储
- 支持将配置结果保存至后端
- 支持读取已有配置进行编辑

### 5.2 数据结构
- 角色包-指标关系的数据结构清晰定义
- 支持多层级指标路径的序列化和反序列化

## 6. 用户体验优化

### 6.1 操作引导
- 每个步骤有清晰的操作提示
- 必填项有明确标识

### 6.2 错误处理
- 表单验证提供即时反馈
- 操作错误有友好提示
- 防止数据丢失的保护机制

### 6.3 视觉反馈
- 所有可交互元素有明确的状态变化
- 操作成功/失败有明确提示
- 加载过程有加载指示器 