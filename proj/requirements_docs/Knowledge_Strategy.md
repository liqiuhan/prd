# ChatBI - 知识&策略模块需求文档

## 1. 概述

知识&策略模块是ChatBI系统的核心功能之一，用于管理和维护企业的知识库和业务策略。该模块允许用户添加、编辑、删除和筛选各类知识内容，并通过标签体系进行分类管理。

## 2. 功能需求

### 2.1 页面布局

页面采用单页面设计，主要包含以下区域：
- 顶部标题栏和搜索/添加区域
- 筛选条件区域
- 知识列表区域
- 分页控制区域
- 添加/编辑知识的弹窗

### 2.2 知识管理功能

#### 2.2.1 知识列表展示
- 以表格形式展示知识列表，包含以下字段：
  - ID：知识唯一标识
  - 标题：知识的名称
  - 类型：文档、问答切片、文档切片
  - 分类：知识、策略
  - 业务线：销售业务、租赁业务、新房业务、运营管理
  - 内容：知识的具体内容预览
  - 标签：关联的标签体系
  - 上传者：知识的创建者
  - 关联思路：与该知识关联的思路数量
  - 创建时间：知识的创建日期
  - 操作：编辑、删除按钮

#### 2.2.2 知识筛选功能
- 提供多维度筛选条件：
  - 知识类型筛选：全部、文档、问答切片、文档切片
  - 内容分类筛选：全部、知识、策略
  - 业务线筛选：全部、销售业务、租赁业务、新房业务、运营管理
  - 标签筛选：支持三级标签层级筛选
    - 一级标签：业绩、房源、客源、带看、商机、行指等
    - 二级标签：根据一级标签动态加载
    - 三级标签：根据二级标签动态加载

#### 2.2.3 知识搜索功能
- 提供搜索框，支持按知识标题和内容进行搜索

#### 2.2.4 知识添加功能
- 点击"添加知识"按钮，弹出添加知识弹窗
- 支持填写以下信息：
  - 标题（必填）
  - 知识类型：文档、问答对、切片
  - 内容分类：知识、策略
  - 内容（必填）：根据知识类型显示不同的内容输入区域
    - 文档/切片：单一文本区域
    - 问答对：问题和回答两个文本区域
  - 标签：支持选择三级标签体系
  - 上传者（必填）

#### 2.2.5 知识编辑功能
- 点击知识列表中的"编辑"按钮，弹出编辑知识弹窗
- 预填充已有信息，支持修改所有字段

#### 2.2.6 知识删除功能
- 点击知识列表中的"删除"按钮，弹出确认对话框
- 确认后删除该条知识

### 2.3 标签管理功能

#### 2.3.1 三级标签体系
- 一级标签：业绩、房源、客源、带看、商机、行指等
- 二级标签：根据一级标签不同，显示不同的二级标签选项
  - 业绩：二手、新房、租赁
  - 商机：400、线索
  - 房源：面访、好房、房源维护、房评、房源等级
- 三级标签：根据二级标签不同，显示不同的三级标签选项
  - 房源等级：优房、良房、中房、差房

#### 2.3.2 标签选择器
- 在添加/编辑知识时，提供标签选择器
- 支持选择一级标签、二级标签和三级标签
- 标签选择遵循层级关系，必须先选择上级标签才能选择下级标签
- 同一级别只能选择一个标签
- 已选标签可以通过点击"×"按钮移除

### 2.4 分页功能
- 提供分页控制，每页显示固定数量的知识条目
- 支持页码导航和前后翻页

## 3. 界面要求

### 3.1 整体风格
- 采用简洁、现代的设计风格
- 主色调使用蓝色系(#4a6baf)，辅以白色和浅灰色背景
- 标签使用不同的颜色区分层级：
  - 一级标签：蓝色系
  - 二级标签：绿色系
  - 三级标签：红色系

### 3.2 响应式设计
- 支持在不同尺寸的设备上正常显示和使用
- 在小屏幕设备上，表格区域支持横向滚动
- 在移动设备上，筛选区域和操作按钮进行适当调整

### 3.3 交互体验
- 表格支持固定表头，内容区域可滚动
- 筛选条件变更后，表格内容实时更新
- 添加/编辑知识时，根据知识类型动态调整表单内容
- 标签选择器提供直观的层级关系展示

## 4. 数据结构

### 4.1 知识条目数据结构
```
{
  "id": "数字ID",
  "title": "知识标题",
  "type": "知识类型(文档/问答切片/文档切片)",
  "category": "内容分类(知识/策略)",
  "businessLine": "业务线",
  "content": "知识内容",
  "tags": [
    {
      "level": "标签层级(1/2/3)",
      "text": "标签文本",
      "parent": "父标签(仅二级和三级标签有)",
      "grandparent": "祖父标签(仅三级标签有)"
    }
  ],
  "uploader": "上传者姓名",
  "relatedThoughts": "关联思路数量",
  "createTime": "创建时间"
}
```

### 4.2 标签体系数据结构
```
{
  "level1Tags": ["业绩", "房源", "客源", "带看", "商机", "行指"],
  "level2Tags": {
    "业绩": ["二手", "新房", "租赁"],
    "商机": ["400", "线索"],
    "房源": ["面访", "好房", "房源维护", "房评", "房源等级"]
  },
  "level3Tags": {
    "房源等级": ["优房", "良房", "中房", "差房"]
  }
}
```

## 5. 业务规则

### 5.1 知识管理规则
- 知识ID自动生成，不可修改
- 知识标题、内容和上传者为必填项
- 创建时间自动生成，不可修改
- 关联思路数量由系统自动计算

### 5.2 标签管理规则
- 每条知识最多可以选择一个一级标签
- 每个一级标签下最多可以选择一个二级标签
- 每个二级标签下最多可以选择一个三级标签
- 选择下级标签前必须先选择上级标签
- 移除上级标签时，相关的下级标签也会被移除

## 6. 性能要求

- 页面加载时间不超过3秒
- 筛选操作响应时间不超过1秒
- 添加/编辑/删除操作响应时间不超过2秒
- 表格支持高效处理大量数据，滚动流畅

## 7. 安全要求

- 所有数据操作需进行权限验证
- 敏感操作(如删除)需二次确认
- 输入数据需进行验证和过滤，防止XSS攻击
- API调用需进行适当的错误处理和日志记录

## 8. 未来扩展考虑

- 支持知识内容的富文本编辑
- 增加知识导入/导出功能
- 增加知识版本控制和历史记录
- 增加知识审核流程
- 增加知识使用情况统计和分析功能
- 支持更复杂的标签关系和多标签选择 